---
title: 正则的扩展
date: 2018-08-11 12:09:15
tags:
- '学习'
- '整理'
categories:
- 'ECMAScript'
---
### 基本用法
{% codeblock lang:javascript %}
var regex = new RegExp('xyz', 'i');
var regex = new RegExp(/xyz/i);
var regex = /xyz/i;

new RegExp(/abc/ig, 'i').flags; //ig被覆盖成i
{% endcodeblock %}
### match()、replace()、search()、split()
String.prototype.match   调用 RegExp.prototype[Symbol.match]
String.prototype.replace 调用 RegExp.prototype[Symbol.replace]
String.prototype.search  调用 RegExp.prototype[Symbol.search]
String.prototype.split   调用 RegExp.prototype[Symbol.split]
### u修饰符、i修饰符、y修饰符
ES6对正则表达式添加了u修饰符，用来处理大于\uFFFF的Unicod字符。
\u004B与\u212A都是K，不加修饰就无法识别非规范的K字符。
y修饰符与g修饰符类似，也是全局匹配，不同之处在于g修饰符只要剩余位置中存在匹配就行，而y修饰符会确保匹配必须从剩余的第一个位置开始。
{% codeblock lang:javascript %}
var s = 'aaa-aa-a';
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s); //['aaa']
r2.exec(s); //['aaa']
r1.exec(s); //['aa']
r2.exec(s); //null
{% endcodeblock %}
### sticky属性
与y修饰符匹配，表示是否设置了y修饰符。
### flags属性
返回正则表达式的修饰符。
### 组匹配
{% codeblock lang:javascript %}
const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;
const matchObj = RE_DATE.exec('2018-03-01');
const year = matchObj[1];   //2018
const month = matchObj[2];  //03
const day = matchObj[3];    //01
{% endcodeblock %}