---
title: ~运算符
date: 2018-08-12 00:23:30
tags:
- '学习'
categories:
- 'ECMAScript'
---
### ~运算符
位运算符是三步处理的过程：
1. 把运算数转换成32位数字
2. 把二进制数转换成它的二进制反码
3. 把二进制数转换成浮点数

{% codeblock lang:javascript %}
var iNum1 = 25;     //25 等于 00000000000000000000000000011001
var iNum2 = ~iNum1; //转换为 11111111111111111111111111100110
alert(iNum2);       //输出 "-26"
{% endcodeblock %}
### ~~技巧
这是刷题时看见别人的代码里使用的东西，通常用来代替Math.trunc()的方法。
{% codeblock lang:javascript %}
//单个 ~
console.log(~1337);         // -1338
//数字输入
console.log(~~47.11);       //47
console.log(~~1.9999);      //1
console.log(~~3);           //3
{% endcodeblock %}
当原始输入不确定时，~~可以将任何非数字类型转换成0：
{% codeblock lang:javascript %}
console.log(~~[])     //0
console.log(~~NaN)    //0
console.log(~~null)   //0

// | 0也是相同的效果
console.log([] | 0)   //0
console.log(NaN | 0)  //0
console.log(null | 0) //0
{% endcodeblock %}
**在使用前应仔细检查值，数值大的情况：**
{% codeblock lang:javascript %}
let number = 2147483647.123;  //比32位最大正数，再多一点
console.log(~~number);        //2147483647 (ok)
number += 10000;              //2147493647.123 (ok)
console.log(~~number);        //-2147473649
{% endcodeblock %}